# evernote-example

Данный проект позволяет получить первое представление о взаимодействии с `evernote` с помощью python3, получить доступ к имеющимся блокнотам, создать новые записи и вывести содержимое записей в консоль.


## Установка

Должен быть установлен python3.7 или новее. Рекомендуется использовать venv для изоляции проекта.

Затем используйте pip (или pip3, если есть конфликт с python2) для установки зависимостей:

```
pip install -r requirements.txt
```

или

```
pip3 install -r requirements.txt
```

Вы столкнётесь с ошибкой, т.к. для установки `evernote==1.25.3` требуется python2. Временно удалите соответствующую строку в файле `requirements.txt`, после чего повторите команду установки для оставшихся пакетов.

Далее потребуется скачать [тестовую версию `evernote-sdk-python3-master`](https://github.com/evernote/evernote-sdk-python3) для python3. Поместите распакованный архив в актуальное виртуальное окружение. Следуйте [официальной инструкции](https://dev.evernote.com/doc/start/python.php). В командной строке, находясь в папке распакованного архива, наберите следующую команду:

```
python setup.py install
```
или

```
python3 setup.py install
```


## Ключи

В архиве тестовой версии `evernote-sdk-python3-master` вы найдёте файл `README.md`. Также изучите [официальную инструкцию на сайте](https://dev.evernote.com/doc/start/python.php). Пройдите регистрацию и получите ключи и токен доступа.

Сохраните ключи и токен в `.env` файл в директорию проекта в следующем формате:

```
EVERNOTE_CONSUMER_KEY=вместо этого текста вставьте ключ
EVERNOTE_CONSUMER_SECRET=вместо этого текста вставьте ключ
EVERNOTE_PERSONAL_TOKEN=вместо этого текста вставьте токен разработчика
JOURNAL_TEMPLATE_NOTE_GUID=вместо этого текста вставьте GUID записи
JOURNAL_NOTEBOOK_GUID=вместо этого текста вставьте GUID блокнота
INBOX_NOTEBOOK_GUID=вместо этого текста вставьте GUID блокнота
```


## Запуск


### EDAMTest.py

Данный скрипт создаёт в базовом блокноте тестовую запись и выводит её GUID в консоль.

Пропишите полученный после регистрации токен разработчика в строку #23.

В консоли, находясь в директории `evernote-sdk-python3-master/sample/client/`, запустите с помощью python3 файл `EDAMTest.py`.

```
python3 EDAMTest.py
```

В случае успеха, вы получите похожий ответ:

```
Is my Evernote API version up to date?  True

Found  1  notebooks:
  *  Первый блокнот

Creating a new note in the default notebook

Successfully created a new note with GUID:  5b3bfd21-78bf-47b9-108c-a5715706c34b
```
GUID данной записи следует прописать в `.env` (JOURNAL_TEMPLATE_NOTE_GUID).


### list_notebooks.py

Данный скрипт выводит в консоль GUID имеющихся блокнотов с названиями.

В консоли, находясь в директории проекта, запустите с помощью python3 файл `list_notebooks.py`.

```
python3 list_notebooks.py
```

В случае успеха, вы получите похожий ответ:

```
1008c6de-fd22-4637-8e2f-9eb70139aea6 - Первый блокнот
```
Полученный GUID можно прописать в `.env` (JOURNAL_NOTEBOOK_GUID и/или INBOX_NOTEBOOK_GUID).


### dump_inbox.py

Данный скрипт выводит в консоль записи из всех блокнотов в хронологическом порядке, начиная с самой свежей. По умолчанию будет выведено до 10 записей.

В консоли, находясь в директории проекта, запустите с помощью python3 файл `dump_inbox.py`.

```
python3 dump_inbox.py
```

Можно использовать опциональный числовой аргумент, который будет задавать максимальное количество выводимых записей. 

```
python3 dump_inbox.py 1234567890
```

Для вывода записей только из конкретного блокнота, нужно предварительно прописать его GUID в файле `.env` (INBOX_NOTEBOOK_GUID).


### add_note2journal.py

Данный скрипт добавляет новую запись в указанный блокнот (JOURNAL_NOTEBOOK_GUID), используя указанную запись как шаблон (JOURNAL_TEMPLATE_NOTE_GUID).

В консоли, находясь в директории проекта, запустите с помощью python3 файл `add_note2journal.py`.

```
python3 add_note2journal.py
```
В случае успеха, в консоль будет выведено нечто похожее:

```
Title Context is:
{
    "date": "0001-01-01",
    "dow": "понедельник"
}
Note created: Test note from EDAMTest.py
Done
```

По умолчанию в консоль будут выведены присвоенные созданной записи текущая дата и день недели.

Можно использовать опциональный аргумент формата `YYYY-MM-DD`, который задаст дату новой записи (день недели будет рассчитан автоматически).

```
python3 add_note2journal.py 0001-01-01
```


### config.py

Данный вспомогательный скрипт отвечает за импорт переменных окружения из файла `.env`.


## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков https://dvmn.org/.
